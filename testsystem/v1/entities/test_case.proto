syntax = "proto3";

package testsystem.v1.entities;

import "testsystem/v1/common/common.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";

option go_package = "github.com/stanterprise/proto-go/testsystem/v1/entities";
option java_package = "com.stanterprise.testsystem.v1.entities";
option java_multiple_files = true;

message TestCaseSpec {
    string id = 1;   // Unique identifier for the test script
    string name = 2; // Name of the test script
    string description = 3; // Description of the test script
    map<string, string> metadata = 4; // Additional metadata for the test script
    testsystem.v1.common.TestStatus status = 5; // Current status of the test script
    string parent_suite_id = 6; // Reference to the parent suite, if any
    repeated string tags = 7; // Tags associated with the test case
}

message TestCaseRun {
    string id = 1; // Unique identifier for the test result
    string test_id = 2; // Reference to the test case
    string title = 3; // Title of the test result
    testsystem.v1.common.TestStatus status = 4; // Result status (e.g., "passed", "failed", "skipped")
    google.protobuf.Timestamp start_time = 5; // Start time of the test execution
    repeated testsystem.v1.common.Attachment attachments = 6; // Attachments related to the test result
    string error_message = 7; // Error message if the test failed
    string stack_trace = 8;  // Stack trace if applicable
    map<string, string> metadata = 9; // Additional metadata for the test result
    repeated string errors = 11; // List of error messages if any
    repeated string actual_tags = 12; // Actual tags associated with the test case during execution
}

message StepRun {
    string id = 1; // Unique identifier for the step result
    string run_id = 2; // Identifier for the global test run this step belongs to
    string test_case_run_id = 3; // Reference to the test case run this step belongs to
    string title = 4; // Title of the step
    string description = 5; // Description of the step
    google.protobuf.Timestamp start_time = 6; // Start time of the test execution
    google.protobuf.Duration duration = 7; // Estimated duration in seconds
    string type = 8; // Type of the step (e.g., "setup", "execution", "validation")
    map<string, string> metadata = 9; // Additional metadata for the step
    string parent_step_id = 10; // Reference to the parent step for nested steps, if any
    string worker_index = 12; // Identifier for the worker executing the step
    testsystem.v1.common.TestStatus status = 13; // Result status (e.g., "passed", "failed", "skipped")
    string error = 14; // Error message if the step failed
    repeated string errors = 15; // List of all error messages observed during step execution, if any
    string location = 16; // Location in the code where the step is defined
}
